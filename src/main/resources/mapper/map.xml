<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mimo.server.dao.MapDao">
    <select id="getMarkers" resultType="MapDto">

        SELECT id, latitude, longitude,
        (6371 * acos(
        cos(radians(#{centerLatitude}))
        * cos(radians(latitude))
        * cos(radians(longitude) - radians(#{centerLongitude}))
        + sin(radians(#{centerLatitude}))
        * sin(radians(latitude))
        )) AS distance
        FROM your_table_name
        HAVING distance < #{radius}
        ORDER BY distance
    </select>


</mapper>
